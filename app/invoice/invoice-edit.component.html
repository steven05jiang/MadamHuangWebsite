<my-menu></my-menu>

<div class="container">
  <div class="page-header"><h2>Edit Invoice</h2></div>
  <div *ngIf="message" class="alert alert-warning">
    {{ message }}
  </div>

<div *ngIf="object">
  <div class="panel panel-default">
    <table class="table table-striped table-bordered table-condensed">
      <tr>
        <th>Attribute</th>
        <th>Value</th>
      </tr>
      <tr>
        <td>Invoice #</td>
        <td>{{object.id}}</td>
      </tr>
      <tr>
        <td>Customer</td>
        <div *ngIf="object.customer.company"> <b>{{object.customer.company}}</b> </div>
        {{object.customer.lastName}} {{object.customer.firstName}}
        <br/>
        {{object.customer.addrLine1}}<br/>
        <p *ngIf="object.customer.addrLine2">{{object.customer.addrLine2}}</p>
        {{object.customer.addrCity}}, {{object.customer.addrState}}<br/>
        {{object.customer.addrCountry}} {{object.customer.addrZip}}<br/>
      </tr>
      <tr>
        <td>Agent Name</td>
        <td>
          <input [(ngModel)]="object.agent" placeholder="Agent Name">
        </td>
      </tr>
      <tr>
        <td>Created By</td>
        <td>{{object.creator}}</td>
      </tr>
      <tr>
        <td>Created On</td>
        <td>
          {{ object.createdOn | date:'MM/dd/yyyy hh:mm a' }}
        </td>
      </tr>
      <tr>
        <td>Updated By</td>
        <td>{{object.updator}}</td>
      </tr>
      <tr>
        <td>Updated On</td>
        <td>
          {{ object.updatedOn | date:'MM/dd/yyyy hh:mm a' }}
        </td>
      </tr>
      <tr>
        <td>Invoice Date</td>
        <td>
          <my-date-picker [options]="myDatePickerOptions" [selDate]="object.invoiceDate" (dateChanged)="onInvoiceDateChanged($event)"></my-date-picker>
        </td>
      </tr>
      <tr>
        <td>description</td>
        <td>
          <textarea [(ngModel)]="object.description" placeholder="description"></textarea>
        </td>
      </tr>
    </table>


    <table class="table table-striped table-bordered table-condensed">
      <tr>
        <!-- <td>#</td> -->
        <th>Item Name</th><th>Note</th><th>Price</th><th>Action</th></tr>
      <tr *ngFor="let item of object.invoiceItems">
        <!--
        <td>
          <span class="badge">{{item.invoiceId}}</span>
          <span class="badge">{{item.itemId}}</span>
        </td>
      -->
        <td>
            <div class="input-group">
              <span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
              <input type="text" [(ngModel)]="item.name" placeholder="item name" size="40"  class="form-control" />
            </div>
          </td>
          <td>
          <div class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-info-sign"></i></span>
            <input type="text" [(ngModel)]="item.description" placeholder="item description" size="40"  class="form-control" />
          </div>
        </td>
        <td>
          <div class="input-group">
            <span class="input-group-addon"><i class="glyphicon glyphicon-usd"></i></span>
            <input type="text" [(ngModel)]="item.price" placeholder="item price" size="5"  class="form-control" />
          </div>
        </td>
        <td>
        <button (click)="removeItem(item)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-minus" aria-hidden=true></span></button>
      </td>
      </tr>
    </table>

    <p class="divider"></p>
    <button (click)="addItem()" class="btn btn-success btn-xs" align="right"><span class="glyphicon glyphicon-plus" aria-hidden=true></span> Add a new line item</button>
  </div>

  <p></p>
  <button (click)="save()" class="btn btn-success btn-md"><span class="glyphicon glyphicon-save" aria-hidden=true></span> save</button>
  <button (click)="goBack()" class="btn btn-warning btn-md"><span class="glyphicon glyphicon-transfer" aria-hidden=true></span> Back</button>

</div>

</div>
